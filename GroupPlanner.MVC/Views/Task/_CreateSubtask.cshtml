@using GroupPlanner.Application.Subtask
@model SubtaskDto

@{
    // The parent task’s deadline comes in via ViewData
    var parent = ViewData["CreateSubtask"] as SubtaskDto ?? new SubtaskDto();
}

<!-- “Add Subtask” button -->
<button type="button"
        class="btn btn-success mb-3"
        data-bs-toggle="modal"
        data-bs-target="#createSubtaskModal">
    <i class="bi bi-plus-lg me-1"></i> Add Subtask
</button>

<!-- Create Subtask Modal -->
<div class="modal fade" id="createSubtaskModal" tabindex="-1" aria-labelledby="createSubtaskModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header bg-success text-white">
        <h5 class="modal-title" id="createSubtaskModalLabel">
          <i class="bi bi-journal-plus me-1"></i> New Subtask
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <form asp-action="CreateSubtask" novalidate>
        <div class="modal-body">
          <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>

          <input asp-for="TaskEncodedName" type="hidden" />

          

          <div class="mb-3">
            <label asp-for="Description" class="form-label">Description</label>
            <input asp-for="Description" class="form-control" placeholder="Enter subtask description" />
            <span asp-validation-for="Description" class="text-danger small"></span>
          </div>

          <div class="mb-3">
            <label asp-for="EstimatedTime" class="form-label">Estimated Time (hours)</label>
            <input asp-for="EstimatedTime"
                   type="number"
                   min="1"
                   step="1"
                   class="form-control"
                   placeholder="e.g. 2" />
            <span asp-validation-for="EstimatedTime" class="text-danger small"></span>
          </div>

          

        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            <i class="bi bi-x-circle me-1"></i> Cancel
          </button>
          <button type="submit" class="btn btn-success">
            <i class="bi bi-check-lg me-1"></i> Create Subtask
          </button>
        </div>
      </form>

    </div>
  </div>
</div>

@section Scripts {
      <partial name="_ValidationScriptsPartial" />
}
